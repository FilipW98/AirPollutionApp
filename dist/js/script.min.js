"use strict";var okBtn=document.querySelector(".ok"),input=document.querySelector("input"),pollutionIcon=document.querySelector(".air-weather__img"),pollutionWord=document.querySelector("#air-quality"),pm10=document.querySelector("#pm10"),pm25=document.querySelector("#pm25"),co=document.querySelector("#co"),so2=document.querySelector("#so2"),weatherIcon=document.querySelector(".weather-type__img"),weatherWord=document.querySelector(".weather-type__title"),temp=document.querySelector("#temp"),feel=document.querySelector("#feel"),hum=document.querySelector("#hum"),wind=document.querySelector("#wind"),city=document.querySelector(".adress__city"),API_LINK="http://api.openweathermap.org/geo/1.0/direct?q=",API_KEY="&appid=b005763a5f5701376b641f6d866e7e64&units=metric",getCoordinates=function(){var t=input.value||"Wrocław";pm25.parentElement.style.backgroundColor="rgba(213, 212, 212, 0.205)",pm10.parentElement.style.backgroundColor="rgba(213, 212, 212, 0.205)",fetch(API_LINK+t+API_KEY).then(function(t){return t.json()}).then(function(t){t[0];var e="lat=".concat(t[0].lat),t="&lon=".concat(t[0].lon);getAirPollution(e,t),getWeather(e,t)}).catch(function(t){return console.log("error",t)})},getAirPollution=function(t,e){fetch("http://api.openweathermap.org/data/2.5/air_pollution?"+t+e+API_KEY).then(function(t){return t.json()}).then(function(t){pm10.textContent=t.list[0].components.pm10.toFixed(1)+" uq/m3",pm25.textContent=t.list[0].components.pm2_5.toFixed(1)+" uq/m3",co.textContent=t.list[0].components.co.toFixed(1)+" uq/m3",so2.textContent=t.list[0].components.so2.toFixed(1)+" uq/m3",city.textContent=input.value.toUpperCase(),input.value="",1===t.list[0].main.aqi?(pollutionWord.textContent="Dobra",pollutionWord.style.color="lime",pollutionIcon.setAttribute("src","dist/img/smile.png")):2===t.list[0].main.aqi?(pollutionWord.textContent="Średnia",pollutionWord.style.color="orange",pollutionIcon.setAttribute("src","dist/img/confused.png")):3<=t.list[0].main.aqi&&(pollutionWord.textContent="Zła",pollutionWord.style.color="red",pollutionIcon.setAttribute("src","dist/img/mask.png")),10<=t.list[0].components.pm2_5&&(pm25.parentElement.style.backgroundColor="rgba(207, 18, 49, 0.664)"),20<=t.list[0].components.pm10&&(pm10.parentElement.style.backgroundColor="rgba(207, 18, 49, 0.664)"),15e3<=t.list[0].components.co&&(co.parentElement.style.backgroundColor="rgba(207, 18, 49, 0.664)"),125<=t.list[0].components.so2&&(so2.parentElement.style.backgroundColor="rgba(207, 18, 49, 0.664)")})},getWeather=function(t,e){fetch("https://api.openweathermap.org/data/2.5/weather?"+t+e+API_KEY).then(function(t){return t.json()}).then(function(t){var e=(3.6*t.wind.speed).toFixed(1);temp.textContent=t.main.temp.toFixed(1)+" ℃",feel.textContent=t.main.feels_like.toFixed(1)+" ℃",hum.textContent=t.main.humidity+" %",wind.textContent=e+" km/h",t.weather[0].id<233?(weatherIcon.setAttribute("src","dist/img/thunderstorm.png"),weatherWord.textContent="Burza"):299<t.weather[0].id&&t.weather[0].id<500?(weatherIcon.setAttribute("src","dist/img/drizzle.png"),weatherWord.textContent="Mżawka"):500<=t.weather[0].id&&t.weather[0].id<600?(weatherIcon.setAttribute("src","dist/img/rain.png"),weatherWord.textContent="Deszczowo"):600<=t.weather[0].id&&t.weather[0].id<701?(weatherIcon.setAttribute("src","dist/img/ice.png"),weatherWord.textContent="Śnieg"):701<=t.weather[0].id&&t.weather[0].id<800?(weatherIcon.setAttribute("src","dist/img/fog.png"),weatherWord.textContent="Mgliśnie"):(t.weather[0].id=800,weatherIcon.setAttribute("src","dist/img/sun.png"),weatherWord.textContent="Słonecznie")})},pressEnter=function(t){t.preventDefault(),13===t.keyCode&&getCoordinates()};okBtn.addEventListener("click",getCoordinates),input.addEventListener("keyup",pressEnter);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJva0J0biIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImlucHV0IiwicG9sbHV0aW9uSWNvbiIsInBvbGx1dGlvbldvcmQiLCJwbTEwIiwicG0yNSIsInNvMiIsIndlYXRoZXJJY29uIiwidGVtcCIsImZlZWwiLCJodW0iLCJ3aW5kIiwiQVBJX0xJTksiLCJBUElfS0VZIiwiZmV0Y2giLCJjaXR5IiwidmFsdWUiLCJwYXJlbnRFbGVtZW50IiwiZGF0YSIsImJhY2tncm91bmRDb2xvciIsInN0eWxlIiwidGhlbiIsImxvbiIsInJlcyIsImpzb24iLCJnZXRBaXJQb2xsdXRpb24iLCJnZXRXZWF0aGVyIiwibGF0IiwiY29uY2F0IiwiY29uc29sZSIsImVyciIsIkFQSV9MSU5LMiIsImxvZyIsInRleHRDb250ZW50IiwibGlzdCIsImNvbXBvbmVudHMiLCJjbyIsInRvRml4ZWQiLCJwbTJfNSIsIm1haW4iLCJhcWkiLCJzZXRBdHRyaWJ1dGUiLCJjb2xvciIsImh1bWlkaXR5Iiwia21QZXJIIiwid2VhdGhlcldvcmQiLCJzcGVlZCIsImlkIiwid2VhdGhlciIsImZlZWxzX2xpa2UiLCJwcmVzc0VudGVyIiwiZSIsInByZXZlbnREZWZhdWx0Iiwia2V5Q29kZSIsImdldENvb3JkaW5hdGVzIiwiYWRkRXZlbnRMaXN0ZW5lciJdLCJtYXBwaW5ncyI6ImFBQUEsSUFBTUEsTUFBUUMsU0FBU0MsY0FBYyxLQUFLLEVBQ3BDQyxNQUFRRixTQUFTQyxjQUFjLE9BQU8sRUFHdENFLGNBQWdCSCxTQUFTQyxjQUFjLG1CQUFtQixFQURoRUcsY0FBQUosU0FBQUMsY0FBQSxjQUFBLEVBRU1HLEtBQUFBLFNBQWdCSixjQUFTQyxPQUFjLEVBRXZDSSxLQUFPTCxTQUFTQyxjQUFjLE9BQVEsRUFDdENLLEdBQU9OLFNBQVNDLGNBQWMsS0FBQSxFQUM1Qk0sSUFBR1AsU0FBU0MsY0FBYyxNQUFNLEVBR3hDTyxZQUFBUixTQUFBQyxjQUFB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RUFHS1MsWUFBVWpCLFlBQVZpQixhQUtMLENBQUEsQ0FFRHBELEVBUE1vRCxXQUFhLFNBQUNDLEdBQ2hCQSxFQUFFQyxlQUFjLEVBQ0UsS0FBZEQsRUFBRUUsU0FDRkMsZUFBYyxDQUV0QixFQUVBeEQsTUFBTXlELGlCQUFpQixRQUFTRCxjQUFjLEVBQzlDckQsTUFBTXNELGlCQUFpQixRQUFTTCxVQUFVIiwiZmlsZSI6InNjcmlwdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBva0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vaycpO1xyXG5jb25zdCBpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0Jyk7XHJcblxyXG4vLyBQb2xsdXRpb249PT09PT09PT1cclxuY29uc3QgcG9sbHV0aW9uSWNvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5haXItd2VhdGhlcl9faW1nJyk7XHJcbmNvbnN0IHBvbGx1dGlvbldvcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWlyLXF1YWxpdHknKTtcclxuXHJcbmNvbnN0IHBtMTAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcG0xMCcpO1xyXG5jb25zdCBwbTI1ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BtMjUnKTtcclxuY29uc3QgY28gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY28nKTtcclxuY29uc3Qgc28yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NvMicpO1xyXG5cclxuLy9XZWF0aGVyPT09PT09PT09PT09PT1cclxuY29uc3Qgd2VhdGhlckljb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud2VhdGhlci10eXBlX19pbWcnKTtcclxuY29uc3Qgd2VhdGhlcldvcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud2VhdGhlci10eXBlX190aXRsZScpO1xyXG5cclxuY29uc3QgdGVtcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0ZW1wJyk7XHJcbmNvbnN0IGZlZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZmVlbCcpO1xyXG5jb25zdCBodW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaHVtJyk7XHJcbmNvbnN0IHdpbmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjd2luZCcpO1xyXG5cclxuY29uc3QgY2l0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZHJlc3NfX2NpdHknKTtcclxuXHJcbmNvbnN0IEFQSV9MSU5LID0gJ2h0dHA6Ly9hcGkub3BlbndlYXRoZXJtYXAub3JnL2dlby8xLjAvZGlyZWN0P3E9JztcclxuY29uc3QgQVBJX0tFWSA9ICcmYXBwaWQ9YjAwNTc2M2E1ZjU3MDEzNzZiNjQxZjZkODY2ZTdlNjQmdW5pdHM9bWV0cmljJztcclxuXHJcbi8vIGNvbnN0IEFQSV9MSU5LID0gXCJodHRwczovL2FwaS5vcGVuYXEub3JnL3YxL21lYXN1cmVtZW50cz9cIlxyXG4vLyBjb25zdCBBUElfS0VZMiA9IFwiJmtleT0wMWMzYzg0OGUxMzY0N2VlOTdlMTAyODA5YmE5N2I0M1wiO1xyXG4vLyBjb25zdCBBUElfTElOSzMgPSBcImh0dHBzOi8vYXBpLm9wZW53ZWF0aGVybWFwLm9yZy9kYXRhLzIuNS93ZWF0aGVyP1wiXHJcblxyXG5cclxuXHJcbmNvbnN0IGdldENvb3JkaW5hdGVzID0gKCkgPT4ge1xyXG5cdGNvbnN0IGNpdHkgPSBpbnB1dC52YWx1ZSB8fCAnV3JvY8WCYXcnO1xyXG4gICAgcG0yNS5wYXJlbnRFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmdiYSgyMTMsIDIxMiwgMjEyLCAwLjIwNSlcIlxyXG4gICAgcG0xMC5wYXJlbnRFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmdiYSgyMTMsIDIxMiwgMjEyLCAwLjIwNSlcIjtcclxuXHRmZXRjaChBUElfTElOSyArIGNpdHkgKyBBUElfS0VZKVxyXG5cdFx0LnRoZW4ocmVzID0+IHJlcy5qc29uKCkpXHJcblx0XHQudGhlbihkYXRhID0+IHtcclxuXHRcdFx0ZGF0YVswXTtcclxuXHRcdFx0Y29uc3QgbGF0ID0gYGxhdD0ke2RhdGFbMF0ubGF0fWA7XHJcblx0XHRcdGNvbnN0IGxvbiA9IGAmbG9uPSR7ZGF0YVswXS5sb259YDtcclxuXHRcdFx0Z2V0QWlyUG9sbHV0aW9uKGxhdCwgbG9uKTtcclxuXHRcdFx0Z2V0V2VhdGhlcihsYXQsIGxvbik7XHJcblx0XHR9KVxyXG5cdFx0LmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZygnZXJyb3InLCBlcnIpKTtcclxufTtcclxuXHJcbmNvbnN0IGdldEFpclBvbGx1dGlvbiA9IChsYXQsIGxvbikgPT4ge1xyXG5cdGNvbnN0IEFQSV9MSU5LMiA9ICdodHRwOi8vYXBpLm9wZW53ZWF0aGVybWFwLm9yZy9kYXRhLzIuNS9haXJfcG9sbHV0aW9uPyc7XHJcblx0ZmV0Y2goQVBJX0xJTksyICsgbGF0ICsgbG9uICsgQVBJX0tFWSlcclxuICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKVxyXG4gICAgLnRoZW4oZGF0YSA9PiB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIHBtMTAudGV4dENvbnRlbnQgPSAoZGF0YS5saXN0WzBdLmNvbXBvbmVudHMucG0xMCkudG9GaXhlZCgxKSArIFwiIHVxL20zXCJcclxuICAgICAgICAgICAgcG0yNS50ZXh0Q29udGVudCA9IChkYXRhLmxpc3RbMF0uY29tcG9uZW50cy5wbTJfNSkudG9GaXhlZCgxKSArIFwiIHVxL20zXCJcclxuICAgICAgICAgICAgY28udGV4dENvbnRlbnQgPSAoZGF0YS5saXN0WzBdLmNvbXBvbmVudHMuY28pLnRvRml4ZWQoMSkgKyBcIiB1cS9tM1wiXHJcbiAgICAgICAgICAgIHNvMi50ZXh0Q29udGVudCA9IChkYXRhLmxpc3RbMF0uY29tcG9uZW50cy5zbzIpLnRvRml4ZWQoMSkgKyBcIiB1cS9tM1wiXHJcblxyXG5cdFx0XHRjaXR5LnRleHRDb250ZW50ID0gaW5wdXQudmFsdWUudG9VcHBlckNhc2UoKTtcclxuXHRcdFx0aW5wdXQudmFsdWUgPSAnJztcclxuXHJcblx0XHRcdGlmIChkYXRhLmxpc3RbMF0ubWFpbi5hcWkgPT09IDEpIHtcclxuXHRcdFx0XHRwb2xsdXRpb25Xb3JkLnRleHRDb250ZW50ID0gJ0RvYnJhJztcclxuXHRcdFx0XHRwb2xsdXRpb25Xb3JkLnN0eWxlLmNvbG9yID0gJ2xpbWUnO1xyXG5cdFx0XHRcdHBvbGx1dGlvbkljb24uc2V0QXR0cmlidXRlKCdzcmMnLCAnZGlzdC9pbWcvc21pbGUucG5nJyk7XHJcblx0XHRcdH0gZWxzZSBpZiAoZGF0YS5saXN0WzBdLm1haW4uYXFpID09PSAyKSB7XHJcblx0XHRcdFx0cG9sbHV0aW9uV29yZC50ZXh0Q29udGVudCA9ICfFmnJlZG5pYSc7XHJcblx0XHRcdFx0cG9sbHV0aW9uV29yZC5zdHlsZS5jb2xvciA9ICdvcmFuZ2UnO1xyXG5cdFx0XHRcdHBvbGx1dGlvbkljb24uc2V0QXR0cmlidXRlKCdzcmMnLCAnZGlzdC9pbWcvY29uZnVzZWQucG5nJyk7XHJcblx0XHRcdH0gZWxzZSBpZiAoZGF0YS5saXN0WzBdLm1haW4uYXFpID49IDMpIHtcclxuXHRcdFx0XHRwb2xsdXRpb25Xb3JkLnRleHRDb250ZW50ID0gJ1rFgmEnO1xyXG5cdFx0XHRcdHBvbGx1dGlvbldvcmQuc3R5bGUuY29sb3IgPSAncmVkJztcclxuXHRcdFx0XHRwb2xsdXRpb25JY29uLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2Rpc3QvaW1nL21hc2sucG5nJyk7XHJcblx0XHRcdH1cclxuXHJcbiAgICAgICAgICAgIGlmIChkYXRhLmxpc3RbMF0uY29tcG9uZW50cy5wbTJfNSA+PSAxMCkge1xyXG4gICAgICAgICAgICAgICAgcG0yNS5wYXJlbnRFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmdiYSgyMDcsIDE4LCA0OSwgMC42NjQpXCI7XHJcbiAgICAgICAgICAgIH1pZiAoZGF0YS5saXN0WzBdLmNvbXBvbmVudHMucG0xMCA+PSAyMCl7XHJcbiAgICAgICAgICAgICAgICBwbTEwLnBhcmVudEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJyZ2JhKDIwNywgMTgsIDQ5LCAwLjY2NClcIjtcclxuICAgICAgICAgICAgfWlmIChkYXRhLmxpc3RbMF0uY29tcG9uZW50cy5jbyA+PSAxNTAwMCkge1xyXG4gICAgICAgICAgICAgICAgY28ucGFyZW50RWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJnYmEoMjA3LCAxOCwgNDksIDAuNjY0KVwiO1xyXG4gICAgICAgICAgICB9aWYgKGRhdGEubGlzdFswXS5jb21wb25lbnRzLnNvMiA+PSAxMjUpIHtcclxuICAgICAgICAgICAgICAgIHNvMi5wYXJlbnRFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmdiYSgyMDcsIDE4LCA0OSwgMC42NjQpXCI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcblx0XHR9KTtcclxufTtcclxuXHJcbmNvbnN0IGdldFdlYXRoZXIgPSAobGF0LCBsb24pID0+IHtcclxuXHRjb25zdCBBUElfTElOSzMgPSAnaHR0cHM6Ly9hcGkub3BlbndlYXRoZXJtYXAub3JnL2RhdGEvMi41L3dlYXRoZXI/JztcclxuXHRmZXRjaChBUElfTElOSzMgKyBsYXQgKyBsb24gKyBBUElfS0VZKVxyXG5cdFx0LnRoZW4ocmVzID0+IHJlcy5qc29uKCkpXHJcblx0XHQudGhlbihkYXRhID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbVBlclMgPSBkYXRhLndpbmQuc3BlZWRcclxuXHRcdFx0Y29uc3Qga21QZXJIID0gKG1QZXJTICogMy42KS50b0ZpeGVkKDEpXHJcbiAgICAgICAgICAgIHRlbXAudGV4dENvbnRlbnQgPSAoZGF0YS5tYWluLnRlbXApLnRvRml4ZWQoMSkgKyBcIiDihINcIlxyXG4gICAgICAgICAgICBmZWVsLnRleHRDb250ZW50ID0gKGRhdGEubWFpbi5mZWVsc19saWtlKS50b0ZpeGVkKDEpICsgXCIg4oSDXCJcclxuICAgICAgICAgICAgaHVtLnRleHRDb250ZW50ID0gZGF0YS5tYWluLmh1bWlkaXR5ICsgXCIgJVwiXHJcbiAgICAgICAgICAgIHdpbmQudGV4dENvbnRlbnQgPSBrbVBlckggKyBcIiBrbS9oXCJcclxuXHRcdFx0aWYgKGRhdGEud2VhdGhlclswXS5pZCA8IDIzMykge1xyXG5cdFx0XHRcdHdlYXRoZXJJY29uLnNldEF0dHJpYnV0ZSgnc3JjJywnZGlzdC9pbWcvdGh1bmRlcnN0b3JtLnBuZycpO1xyXG5cdFx0XHRcdHdlYXRoZXJXb3JkLnRleHRDb250ZW50ID0gJ0J1cnphJztcclxuXHRcdFx0fSBlbHNlIGlmIChkYXRhLndlYXRoZXJbMF0uaWQgPiAyOTkgJiYgZGF0YS53ZWF0aGVyWzBdLmlkIDwgNTAwKSB7XHJcblx0XHRcdFx0d2VhdGhlckljb24uc2V0QXR0cmlidXRlKCdzcmMnLCAnZGlzdC9pbWcvZHJpenpsZS5wbmcnKTtcclxuXHRcdFx0XHR3ZWF0aGVyV29yZC50ZXh0Q29udGVudCA9ICdNxbxhd2thJztcclxuXHRcdFx0fSBlbHNlIGlmIChkYXRhLndlYXRoZXJbMF0uaWQgPj0gNTAwICYmIGRhdGEud2VhdGhlclswXS5pZCA8IDYwMCkge1xyXG5cdFx0XHRcdHdlYXRoZXJJY29uLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2Rpc3QvaW1nL3JhaW4ucG5nJyk7XHJcblx0XHRcdFx0d2VhdGhlcldvcmQudGV4dENvbnRlbnQgPSAnRGVzemN6b3dvJztcclxuXHRcdFx0fSBlbHNlIGlmIChkYXRhLndlYXRoZXJbMF0uaWQgPj0gNjAwICYmIGRhdGEud2VhdGhlclswXS5pZCA8IDcwMSkge1xyXG5cdFx0XHRcdHdlYXRoZXJJY29uLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2Rpc3QvaW1nL2ljZS5wbmcnKTtcclxuXHRcdFx0XHR3ZWF0aGVyV29yZC50ZXh0Q29udGVudCA9ICfFmm5pZWcnO1xyXG5cdFx0XHR9IGVsc2UgaWYgKGRhdGEud2VhdGhlclswXS5pZCA+PSA3MDEgJiYgZGF0YS53ZWF0aGVyWzBdLmlkIDwgODAwKSB7XHJcblx0XHRcdFx0d2VhdGhlckljb24uc2V0QXR0cmlidXRlKCdzcmMnLCAnZGlzdC9pbWcvZm9nLnBuZycpO1xyXG5cdFx0XHRcdHdlYXRoZXJXb3JkLnRleHRDb250ZW50ID0gJ01nbGnFm25pZSc7XHJcblx0XHRcdH0gZWxzZSBpZiAoKGRhdGEud2VhdGhlclswXS5pZCA9IDgwMCkpIHtcclxuXHRcdFx0XHR3ZWF0aGVySWNvbi5zZXRBdHRyaWJ1dGUoJ3NyYycsICdkaXN0L2ltZy9zdW4ucG5nJyk7XHJcblx0XHRcdFx0d2VhdGhlcldvcmQudGV4dENvbnRlbnQgPSAnU8WCb25lY3puaWUnO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHdlYXRoZXJJY29uLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2Rpc3QvaW1nL2Nsb3VkLnBuZycpO1xyXG5cdFx0XHRcdHdlYXRoZXJXb3JkLnRleHRDb250ZW50ID0gJ1BvY2htdXJubyc7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG59O1xyXG5cclxuXHJcbmNvbnN0IHByZXNzRW50ZXIgPSAoZSkgPT4ge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgaWYgKGUua2V5Q29kZSA9PT0gMTMpIHtcclxuICAgICAgICBnZXRDb29yZGluYXRlcygpXHJcbiAgICB9XHJcbn1cclxuXHJcbm9rQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZ2V0Q29vcmRpbmF0ZXMpO1xyXG5pbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHByZXNzRW50ZXIpO1xyXG4iXX0=
